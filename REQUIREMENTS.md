# 機能要件定義書

## 1. システム概要

### 1.1 目的
神経多様性を持つユーザーが持続可能な金銭管理を行えるよう、認知特性に配慮したシステムを提供する。

### 1.2 設計原則
- **認知負荷最小化**: 1画面1機能、シンプルなUI
- **即座フィードバック**: 操作に対する0.1秒以内の反応
- **視覚的直感性**: 数字より色・形・グラフでの情報表現
- **自動化重視**: ユーザーの意志力に依存しない仕組み

## 2. 機能要件

### 2.1 支出記録機能
**FR-001 支出入力**
- 金額、カテゴリ、説明の入力
- よく使う金額のクイック選択（500円、1000円、3000円等）
- 気分状態タグ（happy, stable, tired, stressed, anxious）
- 衝動度レベル（1-5スケール）

**FR-002 カテゴリ管理**
- デフォルトカテゴリ：食費、住居費、交通費、娯楽費、ストレス発散費、日用品
- カスタムカテゴリ追加・編集
- カテゴリ別アイコン表示

**FR-003 履歴表示**
- 日別・週別・月別の支出履歴
- カテゴリ別フィルタリング
- 気分状態での絞り込み

### 2.2 予算管理機能
**FR-004 予算設定**
- カテゴリ別月予算設定
- 日割り予算自動計算
- 週末・特別日の調整機能

**FR-005 仮想予算封筒**
- カテゴリ別残高の視覚表示
- プログレスバーによる使用率表示
- 色による状態表示（緑：安全、黄：注意、赤：危険）

**FR-006 予算シミュレーション**
- 想定支出入力による残予算計算
- 複数シナリオの並列比較
- 調整提案の自動生成

### 2.3 データ視覚化機能
**FR-007 支出分析グラフ**
- 円グラフ：カテゴリ別支出割合
- 棒グラフ：気分状態別平均支出
- 線グラフ：日別支出推移

**FR-008 お金の木（貯蓄視覚化）**
- 貯蓄額に応じた木の成長表現
- レベル別の視覚的変化
- 月別成長履歴の表示

### 2.4 ゲーミフィケーション機能
**FR-009 クエストシステム**
- 日次クエスト：「今日の予算内で過ごす」
- 週次クエスト：「衝動買いを3回以下に抑える」
- 月次クエスト：「食費予算を達成する」

**FR-010 レベル・XPシステム**
- 行動に応じたXP獲得
- レベルアップによる新機能アンロック
- 進捗の視覚的表示

**FR-011 バッジ・称号システム**
- 達成内容に応じたバッジ付与
- 連続達成による特別称号
- コレクション画面での一覧表示

### 2.5 分析・レポート機能
**FR-012 気分-支出相関分析**
- 気分状態別の平均支出額
- 衝動度と支出額の相関表示
- パターン認識とアラート

**FR-013 月次レポート**
- 予算達成率の総合評価
- カテゴリ別詳細分析
- 改善提案の自動生成

## 3. 非機能要件

### 3.1 ユーザビリティ要件
**NFR-001 レスポンス性能**
- ページロード時間：3秒以内
- ユーザー操作への反応：0.1秒以内

**NFR-002 アクセシビリティ**
- WCAG 2.1 AA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応

**NFR-003 認知負荷軽減**
- 1画面の情報要素：7個以下
- 階層の深さ：3階層以下
- 必須入力項目：最小限に制限

### 3.2 技術要件
**NFR-004 データ永続化**
- Phase 1：localStorage使用
- データ損失防止のためのエクスポート機能

**NFR-005 クロスブラウザ対応**
- Chrome, Firefox, Safari, Edge対応
- モバイルブラウザ対応

**NFR-006 PWA対応**
- オフライン基本機能
- ホーム画面追加対応

## 4. 制約事項

### 4.1 Phase 1制約
- 銀行API連携なし（手動入力のみ）
- リアルタイム通知なし
- マルチユーザー対応なし
- サーバーサイド処理なし

### 4.2 データ制約
- ローカルストレージ容量制限（5-10MB）
- デバイス依存のデータ保存

## 5. 将来機能（Phase 2以降）
- 銀行口座連携
- AI支出パターン分析
- 家族・支援者との情報共有
- 専門家相談機能
- 投資・資産形成機能
